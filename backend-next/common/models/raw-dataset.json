{
  "name": "RawDataset",
  "base": "Dataset",
  "idInjection": false,
  "indexes": {
    "proposalId_index": {
      "keys": {
        "proposalId": 1
      }
    },
    "sampleId_index": {
      "sampleId": 1
    }
  },
  "options": {
    "validateUpsert": true
  },
  "properties": {
    "principalInvestigator": {
      "type": "string",
      "required": true,
      "description": "Email of principal investigator"
    },
    "endTime": {
      "type": "date",
      "description": "Time of end of data taking for this dataset, format according to chapter 5.6 internet date/time format in RFC 3339. Local times without timezone/offset info are automatically transformed to UTC using the timezone of the API server"
    },
    "creationLocation": {
      "type": "string",
      "required": true,
      "index": true,
      "description": "Unique location identifier where data was taken, usually in the form /Site-name/facility-name/instrumentOrBeamline-name"
    },
    "dataFormat": {
      "type": "string",
      "description": "Defines format of subsequent scientific meta data, e.g Nexus Version x.y"
    },
    "scientificMetadata": {
      "type": "object",
      "description": "JSON object containing the scientific meta data"
    }
  },
  "validations": [],
  "relations": {
    "proposal": {
      "type": "belongsTo",
      "model": "Proposal",
      "foreignKey": ""
    },
    "sample": {
      "type": "belongsTo",
      "model": "Sample",
      "foreignKey": ""
    }
  },
  "acls": [
    {
      "principalType": "ROLE",
      "principalId": "$everyone",
      "permission": "ALLOW",
      "property": "facet"
    },
    {
      "principalType": "ROLE",
      "principalId": "ingestor",
      "permission": "ALLOW",
      "property": "facet"
    }
  ],
  "methods": {
    "facet": {
      "accepts": [
        {
          "arg": "fields",
          "type": "object"
        }
      ],
      "returns": {
        "arg": "results",
        "type": "Object"
      },
      "description": "Find all datasets within a date range",
      "http": {
        "path": "/facet",
        "verb": "post"
      }
    }
  }
}
