<div class="container">
  <h3>Add Metadata</h3>
  <div *ngIf="dataset$ | async as dataset">
    <form [formGroup]="metadataForm">
      <div
        formArrayName="items"
        *ngFor="let item of metadataForm.get('items').controls; let i = index"
      >
        <div [formGroupName]="i">
          <table>
            <tr>
              <td>
                <mat-form-field class="selectField">
                  <mat-label>Type</mat-label>
                  <mat-select formControlName="fieldType">
                    <mat-option value="string">string</mat-option>
                    <mat-option value="quantity">quantity</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="inputField">
                  <input
                    matInput
                    formControlName="fieldName"
                    placeholder="Field name"
                  />
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="inputField">
                  <input
                    matInput
                    formControlName="fieldValue"
                    placeholder="Field value"
                  />
                </mat-form-field>
              </td>
              <td>
                <button
                  mat-icon-button
                  class="deleteButton"
                  type="button"
                  title="Delete metadata"
                  (click)="onRemove(i)"
                >
                  <i class="material-icons"> remove_circle </i>
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <button
        mat-flat-button
        type="button"
        title="Add metadata"
        class="addButton"
        (click)="addMetadata()"
      >
        <i class="material-icons"> add_circle </i>
        Add metadata
      </button>

      <button
        mat-stroked-button
        type="submit"
        title="Save metadata"
        class="submitButton"
        (click)="onSubmit()"
      >
        <i class="material-icons"> save </i>
        Save
      </button>
    </form>
  </div>
</div>
