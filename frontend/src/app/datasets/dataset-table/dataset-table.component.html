<div>
    <div class="mode-container">
        <div class="ui buttons">
            <button class='ui button' [ngClass]="getModeButtonClasses(m)" *ngFor="let m of modeButtons" (click)="onModeChange($event, m)" >{{m}}</button>
        </div>
        <div [ngSwitch]="mode">
          <!--*ngIf="selectedSets.length > 0">-->
         <div class="ui buttons dataset-action" *ngSwitchDefault>
 
         </div>
         <div class="ui buttons dataset-action" *ngSwitchCase="'archive'">
             <button class="ui button" (click)="archiveClickHandle($event)"><i class="upload icon"></i>Archive</button>
   </div>
         <div class="ui buttons dataset-action" *ngSwitchCase="'retrieve'">
             <button class="ui button" (click)="retrieveClickHandle($event)"><i class="upload icon"></i>Retrieve</button>
       </div>
     </div>
    </div>

    <div class="example-container mat-elevation-z8">
      <mat-table #table [dataSource]="dataSource">
        
        <ng-container *ngFor="let col of cols">
          <ng-container matColumnDef="{{col.field}}">
            <mat-header-cell *matHeaderCellDef> {{col.header}} </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row[col.field]}} </mat-cell>
          </ng-container>  
        </ng-container>
        
    
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
    

    <!-- <p-dataTable #ds [paginator]="true" paginatorPosition="both" [lazy]="true" [loading]="loading$ | async" [rows]="limit$ | async" [value]="datasets" [(selection)]="selectedSets" [rowHover]="true" (onLazyLoad)="onPage($event)"
    (onRowSelect)="onSelect($event)" (onRowUnselect)="onSelect($event)" (onRowClick)="onRowSelect($event)" (onHeaderCheckboxToggle)="onSelect($event)"
   [resizableColumns]="true" columnResizeMode="expand" [rowStyleMap]="rowStyleMap" [totalRecords]="datasetCount$ | async" dataKey="pid">
      	<p-column *ngIf="mode.toLowerCase() !== 'view'" [style]="{'width': '30px'}" selectionMode="multiple"></p-column>
        
        <p-column [hidden]="false" [style]="{'width':'38px', 'overflow':'hidden'}" *ngFor="let col of cols" [field]="col.field" [header]="col.header" [sortable]="col.sortable" (sortFunction)="colSort($event)"> 
          <ng-template let-col let-ds="rowData" let-ri="rowIndex" pTemplate="body">
              <p [ngClass]="{ 'left-align': col.field === 'sourceFolder', 'center-align': col.field !== 'sourceFolder'}">{{getFormat(col.field, ds[col.field], ds)}}</p>
          </ng-template>
        </p-column>
        
        <p-footer>
            <ul>
                <li *ngFor="let ds of selectedSets" style="text-align: left">{{ds.sourceFolder}}, {{ds.pid}}</li>
            </ul>
        </p-footer>
    </p-dataTable> -->
</div>

<p-confirmDialog header="Archive" ></p-confirmDialog>

<p-dialog header="Retrieve {{selectedSets.length}} Datasets?" [(visible)]="retrieveDisplay" [closable]="false" modal="modal" [responsive]="true">
  <ul>
    <li *ngFor="let ds of selectedSets" style="text-align: left">{{ds.sourceFolder}}</li>
  </ul>
  <form  #retrieveForm="ngForm" (ngSubmit)="retrieveSets(retrieveForm)">
    <div class="pull-right top-buffer ">
      <button type="button" class="btn btn-primary" (click)="retrieveDisplay = false; selectedSets=[]">Cancel</button>
      <button type="button" (click)="retrieveSets(retrieveForm)" [disabled]="!retrieveForm.form.valid" class="btn btn-primary">Retrieve</button>
    </div>
  </form>
</p-dialog>
