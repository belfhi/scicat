<div class="dataset-table">
  <div class="mode-container">
    <mat-button-toggle-group [value]="currentMode">
      <mat-button-toggle *ngFor="let mode of modes" (click)="onModeChange($event, mode)" [value]="mode" [ngClass]="mode">
        {{mode | titlecase}}
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <div *ngIf="datasetCount$ |Â async; let count" class="raised">
      {{ count }} dataset{{ count === 1 ? '' : 's' }}.
  </div>

  <div *ngIf="loading$ | async" class="raised">
    <mat-spinner diameter="20"></mat-spinner>
  </div>

  <div class="action-container" [class.hidden]="loading$ | async">
    <button mat-button [disabled]="isEmptySelection$ | async" *ngIf="currentMode === 'archive'" mat-button class="ui button archive-action-btn" (click)="archiveClickHandle($event)" color="primary">
      <i class="archive icon"></i>
      Archive
    </button>
      
    <button mat-button [disabled]="isEmptySelection$ | async" *ngIf="currentMode === 'retrieve'"class="ui button retrieve-action-btn" (click)="retrieveClickHandle($event)" color="primary">
      <i class="upload icon"></i>
      Retrieve
    </button>

    <button mat-button class='ui button export-csv' mat-button (click)="onExportClick()" color="primary">
      <i class="table icon"></i>
      Export Page to CSV
    </button>
  </div>

  <div style="clear: both"></div>

  <dataset-table-pure
    [datasets]="datasets$ | async"
    [selectedSets]="selectedSets$ | async"
    [totalNumber]="datasetCount$ | async"
    [currentPage]="currentPage$ | async"
    [datasetsPerPage]="datasetsPerPage$ | async"
    [rowClassifier]="rowClassifier"
    [disabledColumns]="disabledColumns"
    (onClick)="onClick($event)"
    (onSelect)="onSelect($event)"
    (onDeselect)="onDeselect($event)"
    (onPageChange)="onPageChange($event)"
    (onSortChange)="onSortChange($event)">
  </dataset-table-pure>
</div>