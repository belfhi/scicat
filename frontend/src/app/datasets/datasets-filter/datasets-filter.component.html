<mat-card *ngIf="facets">
  <h3>
    <u>Filter Results</u>
    <h3 class="results-count">Results: {{resultCount$ | async}}</h3>
  </h3>


  <form class="example-form">

    <!-- <div *ngFor="let d of filterTemplate | objKeys"> -->
    <!-- <div [ngSwitch]="getType(d.key, d.value)"> -->
    <mat-form-field>
      <input class="location-input" matInput [(ngModel)]="selectedLocation" placeholder="Location" aria-label="Location" [matAutocomplete]="loc"
        [formControl]="locationInput">
      <mat-autocomplete #loc="matAutocomplete">
        <mat-option class="options" (onSelectionChange)="locSelected(b._id)" *ngFor="let b of filteredLocations | async" [value]="b._id">
          <span>{{ b._id || 'No Location' }}</span> |
          <small>:{{b.count}}</small>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <br />

    <mat-form-field>
      <input class='group-input' matInput (ngModel)="selectedGroup" placeholder="Group" aria-label="Group"
        [matAutocomplete]="grp" [formControl]="groupInput">
      <mat-autocomplete #grp="matAutocomplete">
        <mat-option class="options" (onSelectionChange)="groupSelected(g._id)" *ngFor="let g of filteredGroups | async" [value]="g._id">
          <span>{{ g._id || 'No Group' }}</span>
          <small>: {{g.count}}</small>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <br />

    <mat-form-field>
      <input class="type-input" matInput placeholder="Type" [(value)]="selectedType" name="types"
        [formControl]="typeInput" [matAutocomplete]="type">
        <mat-autocomplete #type="matAutocomplete">
          <mat-option class="options" (onSelectionChange)="typeSelected(g._id)" *ngFor="let g of filteredTypes | async" [value]="g._id">
            <span>{{ g._id || 'No Type' }}</span>
            <small>: {{g.count}}</small>
          </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <br />

    <mat-form-field>
      <input matInput class="keyword-input" matInput placeholder="Keywords" (ngModel)="selectedKeywords" name="keywords" (selectionChange)="keywordSelected(keywords)"
        [formControl]="keywordInput" [matAutocomplete]="kw">
        <mat-autocomplete #kw="matAutocomplete">
          <mat-option class="options" (onSelectionChange)="keywordSelected(g._id)" *ngFor="let g of filteredKeywords | async" [value]="g._id">
            <span>{{ g._id || 'No Keywords' }}</span>
            <small>: {{g.count}}</small>
          </mat-option>
        </mat-autocomplete>
    </mat-form-field>



    <br />

    <!-- <div class="ui field">
      <h3>Date Range</h3> -->
    <mat-form-field>
      <input matInput class="date-input" [matDatepicker]="picker" placeholder="Select a date range" [(ngModel)]="dateRange" name="range-picker"
        (dateChange)="dateChanged($event)">
      <mat-datepicker-toggle matSuffix [for]="picker">
        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker #picker [rangeMode]="true"></mat-datepicker>
    </mat-form-field>

    <!-- <datepicker [selections]="dateSelections$ | async" [datepickerSelector]="datepickerSelector" [datepickerSelectionMode]="dateSelectionMode"
        [placeholder]="'Date Range'" (selectionsChange)="updateDateRange($event)"></datepicker> -->
    <!-- </div> -->
    <br>
    <!-- </div>
    </div> -->
    <button class="ui button clear-filters-btn" (click)="clearFacets()">Clear</button>

  </form>
  <br>
</mat-card>
