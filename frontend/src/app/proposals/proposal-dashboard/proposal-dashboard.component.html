<div fxLayout="row" fxLayout.lt-lg="column">
  <div fxFlex="14" fxFlex.lt-xl="20">
    <div *ngIf="appConfig.searchProposals">
      <mat-card class="big-filters">
        <span class="title">Search</span>
        <button
          mat-button
          class="clear-button"
          color="primary"
          [disabled]="!(hasAppliedFilters$ | async)"
          (click)="onClear()"
        >
          <mat-icon>clear_all</mat-icon> Clear
        </button>
        <div style="clear: both;"></div>
        <app-search-bar
          [clear]="clearSearchBar"
          (onSearch)="onTextSearchChange($event)"
          (onFocus)="onTextSearchChange($event)"
        ></app-search-bar>
        <mat-form-field>
          <mat-icon matPrefix>date_range</mat-icon>
          <input
            matInput
            class="date-input"
            name="range-picker"
            [satDatepicker]="largePicker"
            [value]="dateRangeFilter$ | async"
            (dateChange)="onDateChange($event)"
          />
          <sat-datepicker-toggle matSuffix [for]="largePicker">
            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
          </sat-datepicker-toggle>
          <sat-datepicker #largePicker [rangeMode]="true"></sat-datepicker>
        </mat-form-field>
      </mat-card>
      <div class="small-filters">
        <button
          mat-button
          class="clear-button"
          color="primary"
          [disabled]="!(hasAppliedFilters$ | async)"
          (click)="onClear()"
        >
          <mat-icon>clear_all</mat-icon> Clear
        </button>
        <div style="clear: both;"></div>
        <app-search-bar
          [clear]="clearSearchBar"
          (onSearch)="onTextSearchChange($event)"
          (onFocus)="onTextSearchChange($event)"
        ></app-search-bar>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Filters
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field>
            <mat-icon matPrefix>date_range</mat-icon>
            <input
              matInput
              class="date-input"
              name="range-picker"
              [satDatepicker]="smallPicker"
              [value]="dateRangeFilter$ | async"
              (dateChange)="onDateChange($event)"
            />
            <sat-datepicker-toggle matSuffix [for]="smallPicker">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </sat-datepicker-toggle>
            <sat-datepicker #smallPicker [rangeMode]="true"></sat-datepicker>
          </mat-form-field>
        </mat-expansion-panel>
      </div>
    </div>
  </div>
  <div fxFlex="63" fxFlex.lt-xl="80">
    <app-table
      [data]="tableData"
      [columns]="tableColumns"
      [paginate]="tablePaginate"
      [currentPage]="currentPage$ | async"
      [dataCount]="proposalsCount$ | async"
      [dataPerPage]="proposalsPerPage$ | async"
      (pageChange)="onPageChange($event)"
      (sortChange)="onSortChange($event)"
      (rowClick)="onRowClick($event)"
    ></app-table>
    <ng-template [ngIf]="tableData && tableData.length === 0">
      <mat-card class="no-proposals-message">
        <mat-icon>info</mat-icon> No proposals available.
      </mat-card>
    </ng-template>
  </div>
</div>
